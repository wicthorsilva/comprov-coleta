<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imprimir Documento</title>
    <link rel="stylesheet" href="./stylesPrint.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://rawgit.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.1/html2pdf.bundle.min.js"></script>

</head>
<body>
    <div class="documento" id="documento">
        <div class="header">
            <img class="headerImg" src="./img/paleta-Grtdm.png" alt="paleta-rotadomar">
            <p>01/04/2024</p>
        </div>

        <div class="content">
            <h2>Comprovante de coleta</h2>
            <h3>Transportadora: <span id="transport"></span></h3>
            <h3>Volumes: <span id="volumes"></span></h3>
            <h3>Local da coleta: Rota Do  Mar Fábrica</h3>
            <h3>Notas Fiscais: </h3>

            <div class="contentNFs" id="notasFiscais">

            </div>
        </div>

        <div class="contentFooter">
            <img class="footerImg" src="./img/Grtdm-img.png" alt="G.rotadomar">
        </div>
    </div>
    <div class="buttons">
        <button id="voltarBtn">Voltar à Página Inicial</button>
        <button id="imprimirBtn" onclick="imprimirDocumento()">Gerar PDF para Imprimir</button>
    </div>
    <script>
        document.getElementById("voltarBtn").addEventListener("click", function () {
            window.location.href = "../../index.html";
        });


        // Extraindo parâmetros da URL
        const urlParams = new URLSearchParams(window.location.search);
        const transport = urlParams.get('transport');
        const volumes = urlParams.get('volumes');
        const nfs = urlParams.get('nfs');
        const notasFiscaisString = urlParams.get('notasFiscais');
        const notasFiscais = JSON.parse(notasFiscaisString);

        // Exibindo os parâmetros na página
        document.getElementById("transport").textContent = transport;
        document.getElementById("volumes").textContent = volumes;

        // Exibindo as notas fiscais
        const notasFiscaisElement = document.getElementById("notasFiscais");
        notasFiscais.forEach(nota => {
            const notaElement = document.createElement("span");
            notaElement.textContent = nota;
            notasFiscaisElement.appendChild(notaElement);
        });

    </script>

    <script src="../script.js" defer></script>
</body>
</html>
